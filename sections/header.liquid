{%- if section.settings.announcement_bar_enabled -%}
  <div class="announcement-bar" style="background-color: {{ section.settings.announcement_bar_color }};">
    <div class="page-width">
      <p class="announcement-bar__message">
        {{ section.settings.announcement_bar_text | escape }}
        {%- if section.settings.announcement_bar_link != blank -%}
          <a href="{{ section.settings.announcement_bar_link }}" class="announcement-bar__link">â†’</a>
        {%- endif -%}
      </p>
    </div>
  </div>
{%- endif -%}

<header class="site-header">
  <div class="page-width">
    <div class="header-wrapper">
      <div class="site-header__logo">
        {%- if section.settings.logo != blank -%}
          <a href="/" class="site-header__logo-link">
            <img src="{{ section.settings.logo | img_url: 'master' }}"
              alt="{{ shop.name }}"
              class="site-header__logo-image"
              width="{{ section.settings.logo_width }}"
              loading="lazy">
          </a>
        {%- else -%}
          <a href="/" class="site-header__logo-text">{{ shop.name }}</a>
        {%- endif -%}
      </div>

      <nav class="site-nav">
        {%- for link in section.settings.menu.links -%}
          <a href="{{ link.url }}" class="site-nav__link">{{ link.title }}</a>
        {%- endfor -%}
      </nav>

      <div class="site-header__icons">
        {%- if section.settings.show_search -%}
          <button type="button" class="site-header__icon site-header__search">
            <span class="icon-search" aria-hidden="true">Search</span>
          </button>
        {%- endif -%}

        <a href="/cart" class="site-header__icon site-header__cart">
          <span class="icon-cart" aria-hidden="true">Cart</span>
          <span class="cart-count">{{ cart.item_count }}</span>
        </a>
      </div>
    </div>
  </div>
</header>

<style>
.announcement-bar {
  padding: 10px 0;
  text-align: center;
  color: {{ section.settings.announcement_text_color }};
  font-size: 0.9em;
}

.announcement-bar__message {
  margin: 0;
}

.announcement-bar__link {
  color: inherit;
  text-decoration: none;
  margin-left: 5px;
}

.site-header {
  background: {{ section.settings.header_background }};
  position: relative;
  z-index: 100;
  padding: 20px 0;
}

.header-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.site-header__logo-image {
  display: block;
  max-width: 100%;
  height: auto;
}

.site-header__logo-text {
  font-size: 1.5rem;
  text-decoration: none;
  color: {{ section.settings.header_text_color }};
}

.site-nav {
  display: flex;
  gap: 2rem;
}

.site-nav__link {
  text-decoration: none;
  color: {{ section.settings.header_text_color }};
  font-weight: 500;
  transition: opacity 0.2s;
}

.site-nav__link:hover {
  opacity: 0.8;
}

.site-header__icons {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.site-header__icon {
  color: {{ section.settings.header_text_color }};
  text-decoration: none;
  display: flex;
  align-items: center;
}

.cart-count {
  background: {{ section.settings.accent_color }};
  color: white;
  border-radius: 50%;
  min-width: 20px;
  height: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  margin-left: 5px;
}
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "header",
      "content": "Announcement Bar"
    },
    {
      "type": "checkbox",
      "id": "announcement_bar_enabled",
      "label": "Show announcement",
      "default": true
    },
    {
      "type": "text",
      "id": "announcement_bar_text",
      "label": "Text",
      "default": "Less planning, more pool hangs. Shop the Memorial Day sale!"
    },
    {
      "type": "url",
      "id": "announcement_bar_link",
      "label": "Link"
    },
    {
      "type": "color",
      "id": "announcement_bar_color",
      "label": "Background",
      "default": "#00f0e5"
    },
    {
      "type": "color",
      "id": "announcement_text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Header Settings"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "unit": "px",
      "label": "Logo width",
      "default": 100
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "color",
      "id": "header_background",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "header_text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#00f0e5"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search",
      "default": true
    }
  ]
}
{% endschema %} 